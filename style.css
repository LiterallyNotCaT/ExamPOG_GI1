/* --- GLOBAL --- */
body { 
    background: #f2f2f7; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; 
    margin: 0; height: 100vh; display: flex; justify-content: center; overflow: hidden; 
}
.quiz-container { 
    width: 100%; max-width: 850px; background: white; 
    display: flex; flex-direction: column; height: 100vh; position: relative; 
    box-shadow: 0 0 30px rgba(0,0,0,0.1);
}

/* --- HEADER --- */
.nav-bar { 
    display: flex; justify-content: space-between; align-items: center; 
    padding: 15px 20px; background: white; border-bottom: 1px solid #eee; z-index: 20;
}
.progress-info { 
    font-size: 16px; font-weight: 700; color: #007AFF; 
    background: #eef6ff; padding: 8px 20px; border-radius: 20px; cursor: pointer;
}
.btn-star { font-size: 32px; background: none; border: none; color: #ddd; cursor: pointer; transition: 0.2s; }
.btn-star.active { color: #FFD60A; transform: scale(1.1); }

/* --- BIG NAV BUTTONS --- */
.nav-arrows { display: flex; gap: 15px; }
.btn-nav { 
    width: 45px; height: 45px; border-radius: 50%; border: none; 
    background: #f0f0f0; font-size: 20px; color: #333; cursor: pointer;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1); transition: 0.2s;
}
.btn-nav:active { transform: scale(0.95); background: #e0e0e0; }

/* --- CONTENT --- */
.scroll-area { flex: 1; overflow-y: auto; padding: 20px; background: #f9f9f9; -webkit-overflow-scrolling: touch; }
.viewport { margin-bottom: 30px; }
.canvas-wrapper { 
    position: relative; width: 100%; height: auto !important; 
    border-radius: 12px; overflow: hidden; box-shadow: 0 4px 15px rgba(0,0,0,0.08); 
    background: white; border: 1px solid #eee;
}
canvas { display: block; width: 100% !important; height: auto !important; }
.draw-layer { position: absolute; top: 0; left: 0; z-index: 5; touch-action: none; }
.view-mode { pointer-events: none !important; }

/* Answer Header */
.answer-header { 
    font-size: 18px; font-weight: 800; color: #FF9500; 
    margin: 20px 0 10px 0; letter-spacing: 0.5px; text-transform: uppercase;
}
.hidden-viewport { display: none !important; }

/* --- SIDEBAR TOOLBAR (Pretty & Modern) --- */
.drawing-sidebar {
    position: fixed; left: 15px; top: 50%; transform: translateY(-50%);
    display: flex; flex-direction: column; gap: 12px; 
    background: white; padding: 12px; border-radius: 16px; 
    box-shadow: 0 5px 25px rgba(0,0,0,0.15); z-index: 1000;
}
.drawing-sidebar button {
    width: 48px; height: 48px; border-radius: 12px; border: 1px solid #f0f0f0;
    background: #fff; color: #555; font-size: 18px; cursor: pointer; transition: 0.2s;
    box-shadow: 0 2px 5px rgba(0,0,0,0.05);
}
.drawing-sidebar button.active { background: #007AFF; color: white; border-color: #007AFF; transform: translateY(-2px); }
.btn-clear { color: #FF3B30 !important; }

.tool-group { position: relative; display: flex; align-items: center; }
.tool-settings-trigger {
    position: absolute; right: -10px; top: -5px;
    background: #eee; width: 20px; height: 20px; border-radius: 50%;
    font-size: 12px; display: flex; align-items: center; justify-content: center;
    cursor: pointer; color: #666; font-weight: bold;
}

/* --- SETTINGS POPUP (Bubble Style) --- */
.settings-popup {
    position: absolute; left: 65px; top: 0;
    background: white; padding: 15px; border-radius: 12px;
    box-shadow: 0 5px 25px rgba(0,0,0,0.2); width: 200px;
    display: flex; flex-direction: column; gap: 12px;
    z-index: 1100;
}
.settings-popup.hidden { display: none; }
.settings-popup label { font-size: 12px; font-weight: 700; color: #888; text-transform: uppercase; }

/* RGB Picker */
.color-picker-wrapper { display: flex; align-items: center; gap: 10px; }
input[type="color"] {
    border: none; width: 40px; height: 40px;
    border-radius: 50%; padding: 0; overflow: hidden; cursor: pointer;
}
input[type="color"]::-webkit-color-swatch-wrapper { padding: 0; }
input[type="color"]::-webkit-color-swatch { border: none; border-radius: 50%; border: 2px solid #ddd; }
.color-label { font-size: 13px; color: #555; }

/* Eraser Buttons */
.mode-select { display: flex; gap: 5px; background: #eee; padding: 4px; border-radius: 8px; }
.mode-select button { 
    width: 100%; height: 30px; font-size: 12px; border: none; ; 
    border-radius: 6px; background: transparent; 
}
.mode-select button.active { background: white; color: black; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }

/* --- FOOTER (Big Buttons) --- */
.controls { 
    padding: 20px; background: white; border-top: 1px solid #eee; z-index: 20; 
    box-shadow: 0 -5px 20px rgba(0,0,0,0.05);
}

/* 1. Leak Answer Button (Full Width, Bold) */
.btn-leak { 
    width: 100%; padding: 18px; font-size: 18px; font-weight: 700; 
    background: linear-gradient(135deg, #FF9500, #FF3B30); 
    color: white; border: none; border-radius: 12px; 
    margin-bottom: 15px; cursor: pointer; box-shadow: 0 4px 10px rgba(255, 59, 48, 0.3);
    transition: transform 0.1s;
}
.btn-leak:active { transform: scale(0.98); }

/* 2. Lower Buttons (Large & Prettier) */
.mode-buttons { display: flex; gap: 15px; }
.btn-mode { 
    flex: 1; padding: 16px; font-size: 16px; font-weight: 600;
    background: #f2f2f7; color: #333; border: none; border-radius: 12px;
    cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 8px;
    transition: 0.2s;
}
.btn-mode:active { background: #e5e5ea; transform: scale(0.98); }

/* --- GRID OVERLAY (Clean & Starred Table) --- */
.overlay { 
    position: absolute; top: 0; left: 0; width: 100%; height: 100%; 
    background: rgba(255,255,255,0.98); z-index: 2000; padding: 20px; 
    box-sizing: border-box; display: flex; flex-direction: column;
}
.grid-wrapper { flex: 1; overflow-y: auto; margin-bottom: 20px; }
.grid-table { width: 100%; border-collapse: separate; border-spacing: 5px; }
.grid-table td { 
    border: 1px solid #eee; padding: 15px; text-align: center; 
    background: white; border-radius: 8px; font-size: 16px; font-weight: 500;
    box-shadow: 0 2px 5px rgba(0,0,0,0.05); cursor: pointer;
}
/* Starred Items Styling */
.grid-table td.starred { 
    background: #FFF9C4; border: 2px solid #FFD60A; color: #b45309; font-weight: bold;
}
.btn-close-overlay { 
    width: 100%; padding: 15px; background: #333; color: white; 
    border: none; border-radius: 12px; font-size: 16px; font-weight: bold; cursor: pointer;
}
.hidden { display: none; }